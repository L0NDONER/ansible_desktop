--- 
- 

    # pick out list of pending updates from command output. This essentially
    # takes the above output from "apt-get --simulate dist-upgrade", and
    # pipes it through "cut -f2 -d' ' | sort"
  - 
    name: parse apt-get output to get list of changed packages
    set_fact:
    updates: '{{ apt_simulate.stdout_lines | select("match", "^Inst ")
      | list | splitpart(1, " ") | list | sort }}'
    changed_when: 0

    # tell user about packages being updated
  - 
    name: show pending updates
    debug:
      var: updates
    when: updates.0 is defined
